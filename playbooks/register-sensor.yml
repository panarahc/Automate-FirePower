# A simple playbook to register the manager with the sensor and then configure the sensor on the manager. A conviluted process amde easy!
# I've only tested this on the sensor, not the manager. It 'should' work but needs to be validated.
---
- hosts: FirePower_Sensors
  remote_user: admin
  tasks:
  # Register Manager to Sensor
  - name: Register Manager
    become: true
    shell: /usr/local/sf/bin/sfcli.pl isto managed {{ manager_ip }} {{ manager_key }}

  # Register Sensor to Manager
  - name: Register Sensor
    become: true
    shell: /usr/local/sf/bin/register_appliance.pl {{ inventory_hostname }} {{ manager_key }} sensor
    delegate_to: "{{ manager_ip }}"
